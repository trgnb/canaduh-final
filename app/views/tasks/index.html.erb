<%= render 'shared/navbar' %>
<div class="wrapper">
  <div class="main">

  <% if current_user.user_type == "user" %>
    <div class="slice-container">
      <h1>My Progress</h1>
    </div>
  <% end %>

    <div class="slice-container">
      <h1>TO DO</h1>
      <% if @current_user.user_type == "user" %>
        <h2>Recommended tasks</h2>
          <i class="fa fa-plus"></i> Add to my list
      <% end %>

      <h2>My list</h2>

        <% if @tasks.empty? %>
          <p>No tasks</p>
          <%= link_to new_task_path  do %>
            <i class="fa fa-plus"></i> Add a new task
          <% end %>
        <% else %>
          <% @tasks.each do |task| %>
            <ul>
              <li>
                <div style="display: flex">
                  <%= link_to mark_task_path(task),
                    method: :patch,
                    data: { confirm: "Are you sure?" } do %>
                      <% if task.task_status %>
                        <i class="fa fa-check-square"></i>
                      <% else %>
                        <i class="fa fa-square"></i>
                      <% end %>
                    <% end %>

                  <strong><%= task.task_name%></strong>
                  <%= link_to edit_task_path(task) do %>
                    <i class="fa fa-edit"></i>
                  <% end %>
                  <%= link_to task_path(task),
                      method: :delete,
                      data: { confirm: "Are you sure?" } do %>
                      <i class="fa fa-trash"></i>
                      <% end %>
                </div>
              </li>
            </ul>
          <% end %>
          <%= link_to new_task_path  do %>
            <i class="fa fa-plus"></i> Add a new task
          <% end %>
        <% end %>
    </div>
  </div>
</div>
